(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(t,e,n){t.exports={xbar:"Xbar-xbar-2Zqob",group:"Xbar-group-2P2qF"}},114:function(t,e,n){t.exports={"job-select-wrapper":"JobSelect-job-select-wrapper-1BgMs",jobSelectWrapper:"JobSelect-job-select-wrapper-1BgMs","job-select":"JobSelect-job-select-3tWCV",jobSelect:"JobSelect-job-select-3tWCV"}},188:function(t,e,n){t.exports={action:"Action-action-1lL1n"}},189:function(t,e,n){t.exports={slot:"Slot-slot-303iz"}},190:function(t,e,n){t.exports=n(440)},230:function(t,e){},232:function(t,e){},264:function(t,e){},265:function(t,e){},334:function(t,e){},440:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(78),i=n.n(r),c=n(34),s=n(79),l=n(80),u=n(48),p=function(){for(var t=[],e=16;e>=1;e-=1)t.push({id:e,action:{}});return t},f="ADD_ACTION_TO_SLOT",b="REMOVE_ACTION_FROM_SLOT",d="STORE_ACTION",h="UPDATE_TOOLTIP",m=n(35),v=n.n(m),j=n(63),O=n(17),g=n(18),y=n(20),E=n(19),w=n(21),T=n(81),A=n.n(T),k=function(t,e){return[].concat.apply([],t.map(function(n,a){return a%e?[]:[t.slice(a,a+e)]}))},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(n,a){if(!n.hasOwnProperty(t)||!a.hasOwnProperty(t))return 0;var o="string"===typeof n[t]?n[t].toUpperCase():n[t],r="string"===typeof a[t]?a[t].toUpperCase():a[t],i=0;return o>r?i=1:o<r&&(i=-1),"desc"===e?-1*i:i}};var S=n(188),N=n.n(S);var D=new A.a,C=function(t){function e(t){var n;return Object(O.a)(this,e),(n=Object(y.a)(this,Object(E.a)(e).call(this,t))).el=o.a.createRef(),n}return Object(w.a)(e,t),Object(g.a)(e,[{key:"showTooltip",value:function(){var t=Object(j.a)(v.a.mark(function t(e,n){var a,o,r,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.data.get("Action",e.ID);case 2:a=t.sent,o=this.el.current.getBoundingClientRect(),r={left:o.left,right:o.left+o.width,top:o.top,bottom:o.top+o.height},i={content:a,position:r},this.props.updateTooltip({event:n,details:i});case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"hideTooltip",value:function(){this.props.updateTooltip({event:null,details:null})}},{key:"render",value:function(){var t=this,e=this.props.action;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:N.a.action,draggable:!0,onDragStart:function(){var n;n=e,t.props.storeAction({selectedAction:n})},onMouseEnter:function(n){t.showTooltip(e,n)},onMouseLeave:function(){t.hideTooltip()},ref:this.el},o.a.createElement("img",{src:e.Icon,alt:""})))}}]),e}(a.Component),J=Object(c.b)(null,function(t){return{storeAction:function(e){return t({type:d,payload:e})},updateTooltip:function(e){return t({type:h,payload:e})}}})(C),I=n(189),M=n.n(I);var P=function(t){function e(){return Object(O.a)(this,e),Object(y.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(w.a)(e,t),Object(g.a)(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.xbar,a=e.id,r=e.action,i=e.selectedAction,c=function(t){return t.currentTarget.setAttribute("data-state","inactive")};return o.a.createElement("div",{id:a,className:M.a.slot,onDrop:function(e){return function(e){e.preventDefault(),t.props.addActionToSlot({event:e,action:i,xbar:n}),c(e)}(e)},onDragOver:function(t){return function(t){t.preventDefault(),t.currentTarget.setAttribute("data-state","active")}(t)},onDragLeave:function(t){return c(t)},role:"button"},r.Name&&o.a.createElement(J,{action:r}))}}]),e}(a.PureComponent),_=Object(c.b)(function(t){return{selectedAction:t.selectedAction}},function(t){return{addActionToSlot:function(e){return t({type:f,payload:e})}}})(P);P.defaultProps={action:{},selectedAction:{}};var L=n(113),R=n.n(L),W=function(t){function e(){return Object(O.a)(this,e),Object(y.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(w.a)(e,t),Object(g.a)(e,[{key:"render",value:function(){var t=this.props,e=t.bar,n=t.id,a=k(e,4);return o.a.createElement("div",{className:"".concat(R.a.xbar),key:n,id:n},a.map(function(t,e){return o.a.createElement("div",{className:R.a.group,key:"group-".concat(e)},t.map(function(t){return o.a.createElement(_,{id:t.id,key:"slot-".concat(t.id),action:t.action,xbar:n})}))}))}}]),e}(a.Component);function B(t){return t.titleize()}String.prototype.titleize=function(){var t=this.split(" ");return(t=t.map(function(t){return t.capitalize()})).join(" ")},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var U=n(114),z=n.n(U),F=function(t){function e(){return Object(O.a)(this,e),Object(y.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(w.a)(e,t),Object(g.a)(e,[{key:"render",value:function(){var t=this.props,e=t.jobs,n=t.updateJob,a=[];e&&(a=e.map(function(t){return o.a.createElement("option",{key:"job-".concat(t.ID),value:t.ID},B(t.Name))}));var r=o.a.createElement("div",{className:z.a.jobSelectWrapper},o.a.createElement("select",{name:"jobSelect",id:"jobSelect",className:z.a.jobSelect,onChange:function(t){return n(t.currentTarget.value)}},a));return o.a.createElement(o.a.Fragment,null,r)}}]),e}(a.PureComponent),q=n(65),G=n.n(q),V=function(t){function e(t){var n;return Object(O.a)(this,e),(n=Object(y.a)(this,Object(E.a)(e).call(this,t))).tooltip=o.a.createRef(),n.state={tooltipAlign:"left"},n}return Object(w.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){this.positionTooltip()}},{key:"positionTooltip",value:function(){var t=this.tooltip.current.getBoundingClientRect(),e=document.body.clientWidth,n=t.width+t.left>=e?"left":"right";this.setState({tooltipAlign:G.a[n]})}},{key:"render",value:function(){var t=this.props,e=t.content,n=t.position,a=this.state.tooltipAlign;return o.a.createElement("div",{className:"".concat(G.a.tooltip," ").concat(a),style:{left:n.right,top:n.top},ref:this.tooltip},o.a.createElement("h4",{className:G.a.title},e.Name),e.Description.length>0&&o.a.createElement(function(){var t={__html:e.Description.trim()};return o.a.createElement("p",{className:G.a.description,dangerouslySetInnerHTML:t})},null))}}]),e}(o.a.PureComponent),X=n(82),Y=n.n(X),H=function(t){function e(t){var n;return Object(O.a)(this,e),(n=Object(y.a)(this,Object(E.a)(e).call(this,t))).api=new A.a,window.api=n.api,n.state={jobs:[],actions:[],selectedJob:{}},n}return Object(w.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){this.fetchJobsList()}},{key:"updateJob",value:function(t){var e=this,n=this.state.jobs.find(function(e){return parseInt(e.ID,10)===parseInt(t,10)});this.setState({selectedJob:n},function(){e.fetchActions()})}},{key:"fetchJobsList",value:function(){var t=Object(j.a)(v.a.mark(function t(){var e,n,a=this;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.data.list("ClassJob");case 2:return e=t.sent,t.next=5,e.Results;case 5:e=(e=t.sent).sort(x("Name")),n=e[0],this.setState({jobs:e,selectedJob:n},function(){return a.fetchActions()});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"fetchActions",value:function(){var t=Object(j.a)(v.a.mark(function t(){var e,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.selectedJob,t.next=3,this.api.search("",{filters:"ClassJob.ID=".concat(e.ID)});case 3:return n=t.sent,t.next=6,n.Results;case 6:n=(n=t.sent).filter(function(t){return"Action"===t.UrlType}),this.setState({actions:n});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.props,n=e.bars,a=e.tooltip,r=this.state,i=r.jobs,c=r.actions,s=c.map(function(e){return o.a.createElement("li",{key:"action-".concat(e.ID)},o.a.createElement(J,{action:e,dragged:function(e){t.handleDrag(e)}}))});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"panel"},o.a.createElement("div",{className:Y.a.xbarGroup},Object.keys(n).map(function(t){return o.a.createElement(W,{key:t,id:t,bar:n[t]})}))),o.a.createElement("div",{className:Y.a.panel},o.a.createElement("div",{className:"content-layout content-middle"},o.a.createElement("div",{className:"content-left"},o.a.createElement("h2",null,"Class")),o.a.createElement("div",{className:"content-main"},o.a.createElement(F,{jobs:i,updateJob:function(e){return t.updateJob(e)}}))),o.a.createElement("ul",{className:Y.a.listActions},c&&s)),a&&o.a.createElement(V,{content:a.content,position:a.position}))}}]),e}(a.Component);H.defaultProps={tooltip:null};var Z=Object(c.b)(function(t){return{bars:t.bars,tooltip:t.tooltip}})(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=Object(s.b)(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedAction:null,tooltip:null,bars:{primary:p(),secondary:p(),tertiary:p()}},e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case f:var o=t.bars[a.xbar],r=Number.parseInt(a.event.currentTarget.getAttribute("id"),10);return o.find(function(t){return t.id===r}).action=a.action,Object.assign({},t,Object(u.a)({},t,{bars:Object(u.a)({},t.bars,Object(l.a)({},a.xbar,o)),selectedAction:{}}));case b:return Object.assign({},t,Object(u.a)({},t,{payload:a}));case d:return Object.assign({},t,Object(u.a)({},t,{selectedAction:a.selectedAction}));case h:return Object.assign({},t,Object(u.a)({},t,{tooltip:a.details}));default:return t}});window.store=$,i.a.render(o.a.createElement(c.a,{store:$},o.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},65:function(t,e,n){t.exports={tooltip:"Tooltip-tooltip-148hS",tooltipEnter:"Tooltip-tooltipEnter-2JDwY",right:"Tooltip-right-2XbSu",left:"Tooltip-left-17ypM",bottom:"Tooltip-bottom-2adWg",title:"Tooltip-title-2yqvf",description:"Tooltip-description-26nvp"}},82:function(t,e,n){t.exports={panel:"src-panel-22bBc","list-actions":"src-list-actions-2Uwjp",listActions:"src-list-actions-2Uwjp",xbarGroup:"src-xbarGroup-3v6pY"}}},[[190,1,2]]]);
//# sourceMappingURL=main.4c881cc2.chunk.js.map